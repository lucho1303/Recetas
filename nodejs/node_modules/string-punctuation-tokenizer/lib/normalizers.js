"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.normalizer = exports.normalizerDestructive = exports.normalizationsDestructive = exports._spaceNonSemanticGlyphs = exports._greekNonSemanticGlyphs = exports._hebrewNonSemanticGlyphs = void 0;
// Constants:
// NOTE: in UHB, maqqef 05BE is followed by 2060, word joiner.
// Therefore, we should NOT strip maqqef to match tokenization, which splits on nonword characters.
var _hebrewNonSemanticGlyphs = [{
  inputs: [/[\u0591-\u05AF\u05BD\u05C0\u05C3-\u05C5\u2060]/gi],
  output: ''
}]; // https://unicode-table.com/en/#combining-diacritical-marks

exports._hebrewNonSemanticGlyphs = _hebrewNonSemanticGlyphs;
var _greekNonSemanticGlyphs = [{
  inputs: [/[\u0300-\u0362\u0374-\u0375\u037a\u0384-\u0385\u0387]/g],
  output: ''
}];
exports._greekNonSemanticGlyphs = _greekNonSemanticGlyphs;
var _spaceNonSemanticGlyphs = [{
  inputs: [/(\u200B)/g],
  output: ''
}, {
  inputs: [/\s+/g],
  output: ' '
}];
exports._spaceNonSemanticGlyphs = _spaceNonSemanticGlyphs;
var normalizationsDestructive = [].concat(_hebrewNonSemanticGlyphs).concat(_greekNonSemanticGlyphs).concat(_spaceNonSemanticGlyphs);
/**
 * @param {String} string - The string to normalize
 * @param {[{inputs:[RegExp], output:String}]} normalizations - Normalization Objects to perform the replace with
 * @return {String} - The normalized string
 */

exports.normalizationsDestructive = normalizationsDestructive;

var normalizerDestructive = function normalizerDestructive(string) {
  var normalizations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : normalizationsDestructive;

  var _string = normalizer(string);

  if (string && normalizations) {
    _string = _string.slice(0);
    normalizations.forEach(function (_ref) {
      var inputs = _ref.inputs,
          output = _ref.output;
      inputs.forEach(function (input) {
        _string = _string.replace(input, output);
      });
    });
  }

  return _string;
};
/**
 * Normalize a string: standard Javascript normalization, providing default form.
 * @return {String} normalized string.
 */


exports.normalizerDestructive = normalizerDestructive;

var normalizer = function normalizer() {
  var text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  var form = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'NFKD';
  text = text.normalize(form);
  return text;
};

exports.normalizer = normalizer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9ub3JtYWxpemVycy5qcyJdLCJuYW1lcyI6WyJfaGVicmV3Tm9uU2VtYW50aWNHbHlwaHMiLCJpbnB1dHMiLCJvdXRwdXQiLCJfZ3JlZWtOb25TZW1hbnRpY0dseXBocyIsIl9zcGFjZU5vblNlbWFudGljR2x5cGhzIiwibm9ybWFsaXphdGlvbnNEZXN0cnVjdGl2ZSIsImNvbmNhdCIsIm5vcm1hbGl6ZXJEZXN0cnVjdGl2ZSIsInN0cmluZyIsIm5vcm1hbGl6YXRpb25zIiwiX3N0cmluZyIsIm5vcm1hbGl6ZXIiLCJzbGljZSIsImZvckVhY2giLCJpbnB1dCIsInJlcGxhY2UiLCJ0ZXh0IiwiZm9ybSIsIm5vcm1hbGl6ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ08sSUFBTUEsd0JBQXdCLEdBQUcsQ0FDcEM7QUFBRUMsRUFBQUEsTUFBTSxFQUFFLENBQUMsa0RBQUQsQ0FBVjtBQUFnRUMsRUFBQUEsTUFBTSxFQUFFO0FBQXhFLENBRG9DLENBQWpDLEMsQ0FHUDs7O0FBQ08sSUFBTUMsdUJBQXVCLEdBQUcsQ0FDbkM7QUFBRUYsRUFBQUEsTUFBTSxFQUFFLENBQUMsd0RBQUQsQ0FBVjtBQUFzRUMsRUFBQUEsTUFBTSxFQUFFO0FBQTlFLENBRG1DLENBQWhDOztBQUdBLElBQU1FLHVCQUF1QixHQUFHLENBQ25DO0FBQUVILEVBQUFBLE1BQU0sRUFBRSxDQUFDLFdBQUQsQ0FBVjtBQUF5QkMsRUFBQUEsTUFBTSxFQUFFO0FBQWpDLENBRG1DLEVBRW5DO0FBQUVELEVBQUFBLE1BQU0sRUFBRSxDQUFDLE1BQUQsQ0FBVjtBQUFvQkMsRUFBQUEsTUFBTSxFQUFFO0FBQTVCLENBRm1DLENBQWhDOztBQU1BLElBQU1HLHlCQUF5QixHQUFHLEdBQ3BDQyxNQURvQyxDQUM3Qk4sd0JBRDZCLEVBRXBDTSxNQUZvQyxDQUU3QkgsdUJBRjZCLEVBR3BDRyxNQUhvQyxDQUc3QkYsdUJBSDZCLENBQWxDO0FBTVA7Ozs7Ozs7O0FBS08sSUFBTUcscUJBQXFCLEdBQUcsU0FBeEJBLHFCQUF3QixDQUFDQyxNQUFELEVBQXdEO0FBQUEsTUFBL0NDLGNBQStDLHVFQUE5QkoseUJBQThCOztBQUN6RixNQUFJSyxPQUFPLEdBQUdDLFVBQVUsQ0FBQ0gsTUFBRCxDQUF4Qjs7QUFFQSxNQUFJQSxNQUFNLElBQUlDLGNBQWQsRUFBOEI7QUFDMUJDLElBQUFBLE9BQU8sR0FBR0EsT0FBTyxDQUFDRSxLQUFSLENBQWMsQ0FBZCxDQUFWO0FBQ0FILElBQUFBLGNBQWMsQ0FBQ0ksT0FBZixDQUF1QixnQkFBd0I7QUFBQSxVQUFyQlosTUFBcUIsUUFBckJBLE1BQXFCO0FBQUEsVUFBYkMsTUFBYSxRQUFiQSxNQUFhO0FBQzNDRCxNQUFBQSxNQUFNLENBQUNZLE9BQVAsQ0FBZSxVQUFDQyxLQUFELEVBQVc7QUFDdEJKLFFBQUFBLE9BQU8sR0FBR0EsT0FBTyxDQUFDSyxPQUFSLENBQWdCRCxLQUFoQixFQUF1QlosTUFBdkIsQ0FBVjtBQUNILE9BRkQ7QUFHSCxLQUpEO0FBS0g7O0FBRUQsU0FBT1EsT0FBUDtBQUNILENBYk07QUFlUDs7Ozs7Ozs7QUFJTyxJQUFNQyxVQUFVLEdBQUcsU0FBYkEsVUFBYSxHQUE4QjtBQUFBLE1BQTdCSyxJQUE2Qix1RUFBdEIsRUFBc0I7QUFBQSxNQUFsQkMsSUFBa0IsdUVBQVgsTUFBVztBQUNwREQsRUFBQUEsSUFBSSxHQUFHQSxJQUFJLENBQUNFLFNBQUwsQ0FBZUQsSUFBZixDQUFQO0FBQ0EsU0FBT0QsSUFBUDtBQUNILENBSE0iLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb25zdGFudHM6XHJcbi8vIE5PVEU6IGluIFVIQiwgbWFxcWVmIDA1QkUgaXMgZm9sbG93ZWQgYnkgMjA2MCwgd29yZCBqb2luZXIuXHJcbi8vIFRoZXJlZm9yZSwgd2Ugc2hvdWxkIE5PVCBzdHJpcCBtYXFxZWYgdG8gbWF0Y2ggdG9rZW5pemF0aW9uLCB3aGljaCBzcGxpdHMgb24gbm9ud29yZCBjaGFyYWN0ZXJzLlxyXG5leHBvcnQgY29uc3QgX2hlYnJld05vblNlbWFudGljR2x5cGhzID0gW1xyXG4gICAgeyBpbnB1dHM6IFsvW1xcdTA1OTEtXFx1MDVBRlxcdTA1QkRcXHUwNUMwXFx1MDVDMy1cXHUwNUM1XFx1MjA2MF0vZ2ldLCBvdXRwdXQ6ICcnIH0sXHJcbl07XHJcbi8vIGh0dHBzOi8vdW5pY29kZS10YWJsZS5jb20vZW4vI2NvbWJpbmluZy1kaWFjcml0aWNhbC1tYXJrc1xyXG5leHBvcnQgY29uc3QgX2dyZWVrTm9uU2VtYW50aWNHbHlwaHMgPSBbXHJcbiAgICB7IGlucHV0czogWy9bXFx1MDMwMC1cXHUwMzYyXFx1MDM3NC1cXHUwMzc1XFx1MDM3YVxcdTAzODQtXFx1MDM4NVxcdTAzODddL2ddLCBvdXRwdXQ6ICcnIH0sXHJcbl07XHJcbmV4cG9ydCBjb25zdCBfc3BhY2VOb25TZW1hbnRpY0dseXBocyA9IFtcclxuICAgIHsgaW5wdXRzOiBbLyhcXHUyMDBCKS9nXSwgb3V0cHV0OiAnJyB9LFxyXG4gICAgeyBpbnB1dHM6IFsvXFxzKy9nXSwgb3V0cHV0OiAnICcgfSxcclxuXTtcclxuXHJcblxyXG5leHBvcnQgY29uc3Qgbm9ybWFsaXphdGlvbnNEZXN0cnVjdGl2ZSA9IFtdXHJcbiAgICAuY29uY2F0KF9oZWJyZXdOb25TZW1hbnRpY0dseXBocylcclxuICAgIC5jb25jYXQoX2dyZWVrTm9uU2VtYW50aWNHbHlwaHMpXHJcbiAgICAuY29uY2F0KF9zcGFjZU5vblNlbWFudGljR2x5cGhzKTtcclxuXHJcblxyXG4vKipcclxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyAtIFRoZSBzdHJpbmcgdG8gbm9ybWFsaXplXHJcbiAqIEBwYXJhbSB7W3tpbnB1dHM6W1JlZ0V4cF0sIG91dHB1dDpTdHJpbmd9XX0gbm9ybWFsaXphdGlvbnMgLSBOb3JtYWxpemF0aW9uIE9iamVjdHMgdG8gcGVyZm9ybSB0aGUgcmVwbGFjZSB3aXRoXHJcbiAqIEByZXR1cm4ge1N0cmluZ30gLSBUaGUgbm9ybWFsaXplZCBzdHJpbmdcclxuICovXHJcbmV4cG9ydCBjb25zdCBub3JtYWxpemVyRGVzdHJ1Y3RpdmUgPSAoc3RyaW5nLCBub3JtYWxpemF0aW9ucyA9IG5vcm1hbGl6YXRpb25zRGVzdHJ1Y3RpdmUpID0+IHtcclxuICAgIGxldCBfc3RyaW5nID0gbm9ybWFsaXplcihzdHJpbmcpO1xyXG5cclxuICAgIGlmIChzdHJpbmcgJiYgbm9ybWFsaXphdGlvbnMpIHtcclxuICAgICAgICBfc3RyaW5nID0gX3N0cmluZy5zbGljZSgwKTtcclxuICAgICAgICBub3JtYWxpemF0aW9ucy5mb3JFYWNoKCh7IGlucHV0cywgb3V0cHV0IH0pID0+IHtcclxuICAgICAgICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfc3RyaW5nID0gX3N0cmluZy5yZXBsYWNlKGlucHV0LCBvdXRwdXQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gX3N0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIE5vcm1hbGl6ZSBhIHN0cmluZzogc3RhbmRhcmQgSmF2YXNjcmlwdCBub3JtYWxpemF0aW9uLCBwcm92aWRpbmcgZGVmYXVsdCBmb3JtLlxyXG4gKiBAcmV0dXJuIHtTdHJpbmd9IG5vcm1hbGl6ZWQgc3RyaW5nLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZXIgPSAodGV4dCA9ICcnLCBmb3JtID0gJ05GS0QnKSA9PiB7XHJcbiAgICB0ZXh0ID0gdGV4dC5ub3JtYWxpemUoZm9ybSk7XHJcbiAgICByZXR1cm4gdGV4dDtcclxufTtcclxuIl19